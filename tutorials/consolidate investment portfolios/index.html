
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://getbluemorpho.github.io/blue-morpho/tutorials/consolidate%20investment%20portfolios/">
      
      
        <link rel="prev" href="../automate%20nda%20review/">
      
      
      
      <link rel="icon" href="../../assets/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>Analyze Investment Portfolios - Blue Morpho Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=DM+Sans:300,300i,400,400i,700,700i%7CDM+Sans:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"DM Sans";--md-code-font:"DM Sans"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#analyze-investment-portfolios" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Blue Morpho Docs" class="md-header__button md-logo" aria-label="Blue Morpho Docs" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Blue Morpho Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Analyze Investment Portfolios
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Blue Morpho Docs" class="md-nav__button md-logo" aria-label="Blue Morpho Docs" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    Blue Morpho Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Product
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Product
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../product/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Platform Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Core concepts
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Core concepts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../product/core%20concepts/1.%20collections/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Collections
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../product/core%20concepts/2.%20ontologies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ontologies
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../product/core%20concepts/3.%20extraction%20runs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Extraction Runs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../product/core%20concepts/4.%20knowledge%20bases/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Knowledge Bases
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../product/core%20concepts/5.%20setup%20blue%20morpho%20mcp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Model Context Protocol
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Tutorials
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../analyze-etfs-with-blue-morpho/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Analyze ETFs with Blue Morpho
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../automate%20nda%20review/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Automate NDA Compliance
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Analyze Investment Portfolios
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Analyze Investment Portfolios
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#step-1-upload-your-portfolio-statements" class="md-nav__link">
    <span class="md-ellipsis">
      Step 1: Upload Your Portfolio Statements
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-2-define-your-ontology" class="md-nav__link">
    <span class="md-ellipsis">
      Step 2: Define Your Ontology
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-3-run-an-extraction" class="md-nav__link">
    <span class="md-ellipsis">
      Step 3: Run an Extraction
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step 3: Run an Extraction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-chunking" class="md-nav__link">
    <span class="md-ellipsis">
      3.1 Chunking
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-extraction" class="md-nav__link">
    <span class="md-ellipsis">
      3.2 Extraction
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-deduplication" class="md-nav__link">
    <span class="md-ellipsis">
      3.3 Deduplication
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-4-query-your-consolidated-portfolio" class="md-nav__link">
    <span class="md-ellipsis">
      Step 4: Query Your Consolidated Portfolio
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step 4: Query Your Consolidated Portfolio">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#select-your-knowledge-base" class="md-nav__link">
    <span class="md-ellipsis">
      Select your Knowledge Base
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#query-summary-statistics" class="md-nav__link">
    <span class="md-ellipsis">
      Query: Summary statistics
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#query-top-holdings-of-the-combined-portfolios" class="md-nav__link">
    <span class="md-ellipsis">
      Query: Top holdings of the combined portfolios
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-5-create-a-dashboard-coming-soon" class="md-nav__link">
    <span class="md-ellipsis">
      Step 5: Create a Dashboard (Coming Soon)
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#step-1-upload-your-portfolio-statements" class="md-nav__link">
    <span class="md-ellipsis">
      Step 1: Upload Your Portfolio Statements
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-2-define-your-ontology" class="md-nav__link">
    <span class="md-ellipsis">
      Step 2: Define Your Ontology
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-3-run-an-extraction" class="md-nav__link">
    <span class="md-ellipsis">
      Step 3: Run an Extraction
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step 3: Run an Extraction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-chunking" class="md-nav__link">
    <span class="md-ellipsis">
      3.1 Chunking
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-extraction" class="md-nav__link">
    <span class="md-ellipsis">
      3.2 Extraction
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-deduplication" class="md-nav__link">
    <span class="md-ellipsis">
      3.3 Deduplication
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-4-query-your-consolidated-portfolio" class="md-nav__link">
    <span class="md-ellipsis">
      Step 4: Query Your Consolidated Portfolio
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step 4: Query Your Consolidated Portfolio">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#select-your-knowledge-base" class="md-nav__link">
    <span class="md-ellipsis">
      Select your Knowledge Base
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#query-summary-statistics" class="md-nav__link">
    <span class="md-ellipsis">
      Query: Summary statistics
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#query-top-holdings-of-the-combined-portfolios" class="md-nav__link">
    <span class="md-ellipsis">
      Query: Top holdings of the combined portfolios
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-5-create-a-dashboard-coming-soon" class="md-nav__link">
    <span class="md-ellipsis">
      Step 5: Create a Dashboard (Coming Soon)
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="analyze-investment-portfolios">Analyze Investment Portfolios</h1>
<p>If you have different investment account types (IRAs, 401(k)s, taxable accounts) or use different brokers, you know how tedious it is to get a complete picture of your holdings. This tutorial shows you how to use Blue Morpho to:</p>
<ul>
<li>Consolidate identical holdings across multiple portfolios for a unified view</li>
<li>Perform aggregations, calculations, and analysis</li>
<li>Create interactive dashboards to manage your holdings</li>
</ul>
<p>This use case demonstrates the strength of our approach, as these results cannot be obtained using any state-of-the-art model out of the box.</p>
<p><strong>Similar Use Cases</strong></p>
<p>This approach works for any use case where you need to structure and homogenize data for structured queries (essentially, "turn data into tables and make it queryable"). Similar examples include:</p>
<ul>
<li><strong>Ledger consolidation:</strong> Extract journal entries, accounts, and amounts from PDF exports to unify multiple accounting systems</li>
<li><strong>Portfolio management for Private Equity:</strong> Create portfolio management applications and automate reporting to LPs</li>
<li><strong>Asset management &amp; maintenance:</strong> Merge asset registries from different plants or fleets to enable fleet-wide analytics</li>
<li><strong>Healthcare records analysis:</strong> Structure patient information, diagnoses, procedures, and billing codes from PDF medical records for analysis</li>
</ul>
<h2 id="step-1-upload-your-portfolio-statements">Step 1: Upload Your Portfolio Statements</h2>
<p>Go to the <strong>Collections</strong> section and create a new collection containing your investment statements (PDFs). For this tutorial, we'll use sample statements from Interactive Brokers. The statements cover three different brokerage accounts:</p>
<ul>
<li>A traditional IRA</li>
<li>A Roth IRA  </li>
<li>A regular taxable account</li>
</ul>
<p>You can download them <a href="https://github.com/getbluemorpho/blue-morpho/tree/main/docs/assets/Interactive%20Brokers%20sample%20statements">here</a>.</p>
<p>Upon upload, <strong>Blue Morpho</strong> will automatically parse these documents, transforming them into raw text while preserving table structures to feed them to LLMs in the next steps.</p>
<h2 id="step-2-define-your-ontology">Step 2: Define Your Ontology</h2>
<p>When consolidating multiple portfolios, key concepts (ontology classes) include <code>Account</code>, <code>Cash Balance</code>, <code>Holding</code>, and <code>Financial Instrument</code>.</p>
<p><img width="683" height="341" alt="ontology-diagram" src="https://github.com/user-attachments/assets/02e7356f-0e06-4632-a398-61d00351ef3d" /></p>
<p>Navigate to the <strong>Ontologies</strong> section and create a new ontology. You can name it "consolidate portfolios". After the creation, click on "New version": you can either use the editor or download our <a href="https://github.com/getbluemorpho/blue-morpho/blob/main/docs/assets/consolidate%20portfolios%20ontology.yaml">example ontology in YAML format</a> and import it directly into <strong>Blue Morpho</strong>.</p>
<p>You should see the following classes: </p>
<p><img width="615" height="530" alt="image" src="https://github.com/user-attachments/assets/c9ba3341-0562-43da-aa29-475cceefa340" /></p>
<p><img width="614" height="317" alt="image" src="https://github.com/user-attachments/assets/244f5886-28a1-4e9b-b515-14389d4fb910" /></p>
<p><img width="617" height="419" alt="image" src="https://github.com/user-attachments/assets/baa1b315-cdac-4e51-aee2-2e4669259300" /></p>
<p><img width="615" height="466" alt="image" src="https://github.com/user-attachments/assets/705e98c5-5a57-4a61-b2e9-69bc79b8ea6a" /></p>
<p>And the following relationships:</p>
<p><img width="639" height="501" alt="image" src="https://github.com/user-attachments/assets/61bc5e6d-ed79-4232-b9b4-e30943b5efa9" /></p>
<p>If desired, you can refine the ontology further by modeling <code>Transactions</code>, <code>Dividends</code>, and other financial concepts.</p>
<h2 id="step-3-run-an-extraction">Step 3: Run an Extraction</h2>
<p>Navigate to the <strong>Extraction Runs</strong> section and start a new run using your ontology and document collection.</p>
<h3 id="31-chunking">3.1 Chunking</h3>
<p>This step is not needed for portfolio statements (it's reserved for very long documents). Navigate directly to <strong>Extraction</strong>. </p>
<h3 id="32-extraction">3.2 Extraction</h3>
<p>The default settings work well and there is no need to configure advanced parameters. Click "Extract" to perform the extraction.</p>
<p>At this stage, you should have extracted 3 <code>Accounts</code>, 192 <code>Financial Instruments</code>, 184 <code>Holdings</code> and 7 <code>Cash Balances</code>.</p>
<p>As you can see in the results section, relations have also been extracted. For example, this particular <code>Holding</code> is linked with one <code>Financial Instrument</code> and one <code>Account</code>:</p>
<p><img width="1212" height="642" alt="image" src="https://github.com/user-attachments/assets/3b56bd45-a8b6-406a-9211-809d46fb221e" /></p>
<details class="note">
<summary>Advanced considerations: How Blue Morpho Handles Different Broker Data Formats</summary>
<p>Different brokers format data inconsistently:</p>
<ul>
<li>Some classify interest payments or dividends as transactions, others don't</li>
<li>Some show sell transaction amounts as negative quantities, others as positive</li>
<li>Date formats, currency symbols, and field names vary across platforms</li>
</ul>
<p><strong>What you can do:</strong></p>
<ul>
<li><strong>Use descriptive class definitions</strong>: For example, if you only want stock/bond transactions (excluding interest payments or dividends), state this in your <code>Transaction</code> class description</li>
</ul>
<p><img width="612" height="94" alt="image" src="https://github.com/user-attachments/assets/d2997e72-c4d1-49f3-be55-2a4cf5bcb34a" /></p>
<ul>
<li><strong>Use descriptive property definitions</strong>: For example, if you want sell transaction amounts as positive quantities, specify that all <code>quantity</code> and <code>amount</code> values should be positive numbers and add a <code>transaction_type</code> property that is either "sell" or "buy".</li>
</ul>
<p><img width="608" height="528" alt="image" src="https://github.com/user-attachments/assets/b3c4849e-5dcc-4692-9748-42914ffa56b8" /></p>
<p>Blue Morpho will automatically transform inconsistent broker data into clean, standardized entities that follow your exact specifications. </p>
</details>
<h3 id="33-deduplication">3.3 Deduplication</h3>
<p>This critical step consolidates duplicate entities across your multiple accounts. For example, Amazon (AMZN) stock is held in all three accounts, so it was extracted three times as separate <code>Financial Instrument</code> entities. While it's correct to maintain three separate <code>Holding</code> entities (one for each account), you want to create a single <code>Financial Instrument</code> entity for AMZN.</p>
<p>This resolved entity will link to multiple <code>Holding</code> entities, which themselves remain linked to their respective <code>Accounts</code>, maintaining account relationships.</p>
<p>To do this, click on "Add class to deduplicate entities" and select <code>Financial Instrument</code>.</p>
<p>Using natural language, simply state how you want duplicates to be identified. In this case, it's straightforward: "Merge instruments if they have the same symbol or CUSIP."</p>
<p><img width="1270" height="640" alt="image" src="https://github.com/user-attachments/assets/7159f869-95a1-420d-928b-47b7a1a412d1" /></p>
<p>Click on "Generate rules" and you should see a set of conditions displayed on the right.</p>
<p><code>Financial Instruments</code> that meet these conditions will be considered duplicates and auto-resolved. If there are conflicting properties (which shouldn't occur in this simple example), an LLM will resolve them based on best judgment, or based on merge guidelines you can also provide as "Advanced parameters".</p>
<p>Clicking "Deduplicate" performs the consolidation.</p>
<p>After deduplication, you will have 386 entities before deduplication and 289 entities after.</p>
<p>This step keeps account-specific holdings separate (for tax tracking or individual portfolio performance) while enabling portfolio-wide analysis, as we'll see in the next step. See for example "BKNG" <code>Financial Instrument</code> that is linked to 3 <code>Holdings</code> and originates from 3 source entities:
<img width="1224" height="282" alt="image" src="https://github.com/user-attachments/assets/3d16fb82-299e-462e-b105-552e02e98253" /></p>
<details class="note">
<summary>Advanced considerations: Sophisticated Deduplication</summary>
<p>This step is also useful in more complex cases. For example, "Tesla" and "Tesla, Inc." can be reconciled using fuzzy matching on the corresponding property, plus AI review to make the final decision (a tutorial dedicated to complex entity resolution will come soon). </p>
<p>Once complete, go to <strong>Results</strong> and create your <strong>Knowledge Base</strong>: this becomes your queryable, unified investment database ready for analysis!</p>
</details>
<h2 id="step-4-query-your-consolidated-portfolio">Step 4: Query Your Consolidated Portfolio</h2>
<p>This is where it gets the most exciting! You can now run sophisticated queries across your unified portfolio data.</p>
<p>Navigate to <strong>Ask</strong> section. This will open a conversational interface. You should land on our dedicated "Knowledge Base Agent". If not, select it from the menu as in the screenshot below:</p>
<p><img width="621" height="175" alt="image" src="https://github.com/user-attachments/assets/71a666b8-aa08-4ec2-8c24-a46b5cb7a75f" /></p>
<h3 id="select-your-knowledge-base">Select your Knowledge Base</h3>
<blockquote>
<p>"Project ‘YOUR-PROJECT’, knowledge base ‘YOUR-KNOWLEDGE-BASE’</p>
</blockquote>
<h3 id="query-summary-statistics">Query: Summary statistics</h3>
<p>Let's first verify that we can replicate summary statistics present in the account statements to confirm accuracy: </p>
<blockquote>
<p>Compute allocation (in terms of market value and % of total) by type of financial instrument, for each account. Take the cash position into account.</p>
</blockquote>
<p>The agent should return:</p>
<p><img width="833" height="632" alt="image" src="https://github.com/user-attachments/assets/38a63385-da9c-437c-a5a0-5dddbff6b128" /></p>
<p>You should have the exact same metrics that you can find in the accounts statements. For example, in the traditional IRA account statement, we can find:</p>
<p><img width="390" height="157" alt="image" src="https://github.com/user-attachments/assets/20a26d14-97e6-4cba-9d6b-cd1df6e9b436" /></p>
<p>The numbers match (although the aggregated information is of course not in the knowledge base), that's a good start! Now we can perform other queries.</p>
<h3 id="query-top-holdings-of-the-combined-portfolios">Query: Top holdings of the combined portfolios</h3>
<p>Now let’s aggregate across accounts.</p>
<blockquote>
<p>What are the top 10 financial instruments by holding market value of the consolidated portfolio? For each instrument, indicate in how many accounts it can be found.</p>
</blockquote>
<p><img width="836" height="627" alt="image" src="https://github.com/user-attachments/assets/ff768c82-5451-427a-8853-5485e8d94ba7" /></p>
<p>Perfect!</p>
<p>When provided with the three account statements, both the latest OpenAI and Anthropic models will fail at this query and other advanced queries (despite appearing confident in their responses), which outlines the strength of our approach. </p>
<p>In fact, our approach is the only approach that scales well with large portfolios, different brokerage accounts using varying data structures and conventions, more sophisticated ontologies, and additional documents in the collection.</p>
<h2 id="step-5-create-a-dashboard-coming-soon">Step 5: Create a Dashboard (Coming Soon)</h2>
<p><strong>Blue Morpho</strong> allows you to build dashboards to visualize your consolidated portfolio. Our dashboards are:</p>
<ul>
<li>
<p><strong>Interactive:</strong> They feature filters, dropdown menus, and other interactive elements</p>
</li>
<li>
<p><strong>Dynamic:</strong> Adding documents to the collection (not yet supported) will iteratively grow the <strong>Knowledge Base</strong> and automatically populate the dashboards with fresh data</p>
</li>
</ul>
<p>Simply describe what you want in natural language, and our system will generate the appropriate visualizations!</p>
<p>Here are the chart types you can use:</p>
<ul>
<li>Area Chart</li>
<li>Area Stacked Chart  </li>
<li>Bar Chart</li>
<li>Bar Stacked Chart</li>
<li>Line Chart</li>
<li>Pie Chart</li>
<li>Scatter Chart</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../automate%20nda%20review/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Automate NDA Compliance">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Automate NDA Compliance
              </div>
            </div>
          </a>
        
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      ⓒ Copyright 2025 - Blue Morpho
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.footer", "navigation.path", "navigation.sections"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>